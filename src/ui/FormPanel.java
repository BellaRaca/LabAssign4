/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package ui;

import java.awt.CardLayout;
import javax.swing.JOptionPane;
import java.awt.Color;
import javax.swing.JPanel;
import model.User;


/**
 *
 * @author bellarao
 */
public class FormPanel extends javax.swing.JPanel {
private User newUser;

    /**
     * Creates new form FormPanel
     */
    private JPanel buttonPanel;
    public FormPanel(JPanel inputPanel) {
        initComponents();
        this.buttonPanel = inputPanel;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        titleLabel = new javax.swing.JLabel();
        firstLabel = new javax.swing.JLabel();
        lastLabel = new javax.swing.JLabel();
        emailaddressLabel = new javax.swing.JLabel();
        ageLabel = new javax.swing.JLabel();
        messageLabel = new javax.swing.JLabel();
        jScrollPane5 = new javax.swing.JScrollPane();
        messageTextArea = new javax.swing.JTextArea();
        firstNameTextField = new javax.swing.JTextField();
        lastNameTextField = new javax.swing.JTextField();
        ageTextField = new javax.swing.JTextField();
        emailaddressTextField = new javax.swing.JTextField();
        typeLabel = new javax.swing.JLabel();
        typeDropdown = new javax.swing.JComboBox<>();
        submitLabel = new javax.swing.JButton();
        genderLabel = new javax.swing.JLabel();
        female = new javax.swing.JRadioButton();
        male = new javax.swing.JRadioButton();

        titleLabel.setFont(new java.awt.Font("Katari", 1, 18)); // NOI18N
        titleLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        titleLabel.setText("Customer Registration Form");

        firstLabel.setFont(new java.awt.Font("Helvetica", 1, 14)); // NOI18N
        firstLabel.setText("First Name:");

        lastLabel.setFont(new java.awt.Font("Helvetica Neue", 1, 14)); // NOI18N
        lastLabel.setText("Last Name:");

        emailaddressLabel.setFont(new java.awt.Font("Helvetica Neue", 1, 14)); // NOI18N
        emailaddressLabel.setText("Email Address:");

        ageLabel.setFont(new java.awt.Font("Helvetica Neue", 1, 14)); // NOI18N
        ageLabel.setText("Age:");

        messageLabel.setFont(new java.awt.Font("Helvetica Neue", 1, 14)); // NOI18N
        messageLabel.setText("Message:");

        messageTextArea.setBackground(new java.awt.Color(255, 204, 204));
        messageTextArea.setColumns(20);
        messageTextArea.setRows(5);
        jScrollPane5.setViewportView(messageTextArea);

        firstNameTextField.setBackground(new java.awt.Color(255, 204, 204));
        firstNameTextField.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                firstNameTextFieldActionPerformed(evt);
            }
        });
        firstNameTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                firstNameTextFieldKeyReleased(evt);
            }
        });

        lastNameTextField.setBackground(new java.awt.Color(255, 204, 204));
        lastNameTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                lastNameTextFieldKeyReleased(evt);
            }
        });

        ageTextField.setBackground(new java.awt.Color(255, 204, 204));
        ageTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                ageTextFieldKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                ageTextFieldKeyReleased(evt);
            }
        });

        emailaddressTextField.setBackground(new java.awt.Color(255, 204, 204));
        emailaddressTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                emailaddressTextFieldKeyReleased(evt);
            }
        });

        typeLabel.setFont(new java.awt.Font("Helvetica Neue", 1, 14)); // NOI18N
        typeLabel.setText("Type:");

        typeDropdown.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "New Customer", "Return Customer", "Guest" }));
        typeDropdown.setSelectedIndex(-1);
        typeDropdown.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                typeDropdownActionPerformed(evt);
            }
        });

        submitLabel.setBackground(new java.awt.Color(153, 153, 153));
        submitLabel.setFont(new java.awt.Font("Helvetica Neue", 1, 14)); // NOI18N
        submitLabel.setText("Submit");
        submitLabel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                submitLabelActionPerformed(evt);
            }
        });

        genderLabel.setFont(new java.awt.Font("Helvetica Neue", 1, 13)); // NOI18N
        genderLabel.setText("Gender:");

        buttonGroup1.add(female);
        female.setText("Female");
        female.setActionCommand("FEMALE CUSTOMER");

        buttonGroup1.add(male);
        male.setText("Male");
        male.setActionCommand("MALE CUSTOMER");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(269, 269, 269)
                        .addComponent(submitLabel))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(189, 189, 189)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(firstLabel)
                            .addComponent(titleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 279, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(ageLabel)
                                .addComponent(lastLabel))))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addGroup(layout.createSequentialGroup()
                                    .addGap(226, 226, 226)
                                    .addComponent(typeLabel)
                                    .addGap(42, 42, 42))
                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(messageLabel)
                                    .addGap(40, 40, 40)))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(genderLabel)
                                    .addComponent(emailaddressLabel))
                                .addGap(40, 40, 40)))
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(female)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(typeDropdown, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(firstNameTextField)
                                .addComponent(lastNameTextField)
                                .addComponent(ageTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(emailaddressTextField)
                                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(male))))
                .addContainerGap(161, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(37, 37, 37)
                .addComponent(titleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(firstLabel)
                    .addComponent(firstNameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lastLabel)
                    .addComponent(lastNameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(ageLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(ageTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(emailaddressLabel)
                    .addComponent(emailaddressTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(35, 35, 35)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(genderLabel)
                    .addComponent(female))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(43, 43, 43)
                        .addComponent(messageLabel)
                        .addGap(101, 101, 101))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addComponent(male)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 77, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(29, 29, 29)))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(typeLabel)
                    .addComponent(typeDropdown, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(submitLabel)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        genderLabel.getAccessibleContext().setAccessibleName("");
    }// </editor-fold>//GEN-END:initComponents

    private void firstNameTextFieldActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_firstNameTextFieldActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_firstNameTextFieldActionPerformed

    private void firstNameTextFieldKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_firstNameTextFieldKeyReleased
        // TODO add your handling code here:
        String firstName = firstNameTextField.getText().toLowerCase();
        for (int i = 0; i < firstName.length(); i++) {
            if (firstName.charAt(i) < 97 || firstName.charAt(i) > 122) {
                JOptionPane.showMessageDialog(this, "Your first name must contain character from 'A' to 'Z' or character from 'a' to 'z'", "Wrong first name input", JOptionPane.ERROR_MESSAGE);
                break;
            }
        }
    }//GEN-LAST:event_firstNameTextFieldKeyReleased

    private void lastNameTextFieldKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_lastNameTextFieldKeyReleased
        // TODO add your handling code here:
        String lastName = lastNameTextField.getText().toLowerCase();
        for (int i = 0; i < lastName.length(); i++) {
            if (lastName.charAt(i) < 97 || lastName.charAt(i) > 122) {
                JOptionPane.showMessageDialog(this, "Your last name must contain character from 'A' to 'Z' or character from 'a' to 'z'", "Wrong last name input", JOptionPane.ERROR_MESSAGE);
                break;
            }
        }
    }//GEN-LAST:event_lastNameTextFieldKeyReleased

    private void ageTextFieldKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_ageTextFieldKeyReleased
        // TODO add your handling code here:
        String age = ageTextField.getText();
        for (int i = 0; i < age.length(); i++) {
            if (age.charAt(i) < 48 || age.charAt(i) > 57) {
                JOptionPane.showMessageDialog(this, "The age must contain from '1' to '9'", "Wrong age Input", JOptionPane.ERROR_MESSAGE);
                break;
            }
        }
        if (age.length() >= 2 && age.charAt(0) == '0') {
            JOptionPane.showMessageDialog(this, "The age format is wrong", "Wrong age Input", JOptionPane.ERROR_MESSAGE);
        }
        int ageNumberFormat = Integer.parseInt(age);
        if (ageNumberFormat >= 150) {
            JOptionPane.showMessageDialog(this, "The age is too large", "Wrong age Input", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_ageTextFieldKeyReleased

    private void emailaddressTextFieldKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_emailaddressTextFieldKeyReleased
        // TODO add your handling code here:
        String currentEmailAddressContent = emailaddressTextField.getText();
        int atCounter = 0;
        for (int i = 0; i < currentEmailAddressContent.length(); i++) {
            if (currentEmailAddressContent.charAt(i) == '@') {
                atCounter++;
                if (atCounter >= 2) {
                    JOptionPane.showMessageDialog(this, "invalid email address","Wrong Emial Format", JOptionPane.ERROR_MESSAGE);
                    break;
                }
            }
        }

    }//GEN-LAST:event_emailaddressTextFieldKeyReleased

    private void typeDropdownActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_typeDropdownActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_typeDropdownActionPerformed

    private void submitLabelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_submitLabelActionPerformed
        // TODO add your handling code here:
        // System.out.println ("Congratulations, you have submitted")
        newUser = new User();
        newUser.setfirstLabel( firstNameTextField.getText());//for text fields
        newUser.setlastLabel(lastNameTextField.getText());//for text fields
        newUser.setageLabel(ageTextField.getText());//for text fields
        newUser.setemailaddressLabel(emailaddressTextField.getText());//for text fields
        newUser.setmessageLabel(messageTextArea.getText());//for text field
        newUser.settypeLabel(typeDropdown.getSelectedItem().toString());//selected item dropdown
//        newUser.setgenderLabel(buttonGroup1.getSelection().getActionCommand());   
newUser.setgenderLabel(buttonGroup1.getSelection().getActionCommand());    
        boolean isEmailAddressValid = isEmailAddressValid(newUser.getemailaddressLabel());
        if (isEmailAddressValid == false) {
            JOptionPane.showMessageDialog(this, "invalid email address","Wrong Emial Format", JOptionPane.ERROR_MESSAGE);

        } else {

//            jPanel1.setVisible(false);
//            firstLabel3.setText(firstLabel);
//            lastLabel3.setText(lastLabel);
//            ageLabel3.setText(ageLabel);
//            emailLabel3.setText(emailaddressLabel);
//            messageLabel3.setText(messageLabel);
//            typeLabel3.setText(typeLabel);
//
//            jPanel2.setVisible(true);


        }  
        
         ViewPanel newViewPanel = new ViewPanel(newUser);
        buttonPanel.add(newViewPanel);
        CardLayout layout = (CardLayout) buttonPanel.getLayout();
        layout.next(buttonPanel);
    }//GEN-LAST:event_submitLabelActionPerformed
public User getUser(){
if (this.newUser==null){
return new User();
} else {
return this.newUser;
}
}
    private void ageTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_ageTextFieldKeyPressed
        // TODO add your handling code here:
        try{ ageTextField.setForeground(Color.black);
            int age = Integer.parseInt(ageTextField.getText());
        }
        catch(Exception e){
            ageTextField.setForeground(Color.red);
        }
    }//GEN-LAST:event_ageTextFieldKeyPressed
    private boolean isEmailAddressValid(String emailAddress) {
        if (emailAddress.charAt(0) == '@' || emailAddress.charAt(emailAddress.length() - 1) == '@') {
            return false;
        }
        int atCounter = 0;
        for (int i = 0; i < emailAddress.length(); i++) {
            if (emailAddress.charAt(i) == '@') {
                atCounter++;
            }
        }
        if (atCounter == 1) {
            return true;
        } else {
            return false;
        }
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel ageLabel;
    private javax.swing.JTextField ageTextField;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JLabel emailaddressLabel;
    private javax.swing.JTextField emailaddressTextField;
    private javax.swing.JRadioButton female;
    private javax.swing.JLabel firstLabel;
    private javax.swing.JTextField firstNameTextField;
    private javax.swing.JLabel genderLabel;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JLabel lastLabel;
    private javax.swing.JTextField lastNameTextField;
    private javax.swing.JRadioButton male;
    private javax.swing.JLabel messageLabel;
    private javax.swing.JTextArea messageTextArea;
    private javax.swing.JButton submitLabel;
    private javax.swing.JLabel titleLabel;
    private javax.swing.JComboBox<String> typeDropdown;
    private javax.swing.JLabel typeLabel;
    // End of variables declaration//GEN-END:variables
}
